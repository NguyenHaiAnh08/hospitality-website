{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///D:/DACNA%20Nextjs/hospitality-website/my-app/src/app/services/axios.customize.service.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: 'http://localhost:5000/api', // Đổi lại nếu BE chạy port khác hoặc deploy\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  withCredentials: true, // Nếu BE dùng cookie/session\r\n});\r\n\r\nexport default axiosInstance;\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,gBAAgB,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACjC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;uCAEe","debugId":null}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///D:/DACNA%20Nextjs/hospitality-website/my-app/src/app/services/api.service.ts"],"sourcesContent":["import axiosInstance from './axios.customize.service';\r\n\r\n// Đăng nhập\r\nexport const login = async (email: string, password: string) => {\r\n  const response = await axiosInstance.post('/users/login', { email, password });\r\n  return response.data;\r\n};\r\n\r\n// Lấy danh sách thuốc (cần token)\r\nexport const getMedicines = async (token: string) => {\r\n  const response = await axiosInstance.get('/medicines', {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n  return response.data;\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,QAAQ,OAAO,OAAe;IACzC,MAAM,WAAW,MAAM,uJAAA,CAAA,UAAa,CAAC,IAAI,CAAC,gBAAgB;QAAE;QAAO;IAAS;IAC5E,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,eAAe,OAAO;IACjC,MAAM,WAAW,MAAM,uJAAA,CAAA,UAAa,CAAC,GAAG,CAAC,cAAc;QACrD,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IACA,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///D:/DACNA%20Nextjs/hospitality-website/my-app/src/app/context/AuthContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { User, UserRole } from '../datats/auth';\r\nimport Cookies from 'js-cookie';\r\nimport { login as apiLogin } from '../services/api.service';\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  isAuthenticated: boolean;\r\n  login: (email: string, password: string) => Promise<void>;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check for existing session\r\n    const storedUser = Cookies.get('user');\r\n    if (storedUser) {\r\n      try {\r\n        const parsedUser = JSON.parse(storedUser);\r\n        setUser(parsedUser);\r\n        setIsAuthenticated(true);\r\n      } catch (error) {\r\n        console.error('Error parsing stored user:', error);\r\n        Cookies.remove('user');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const login = async (email: string, password: string) => {\r\n    try {\r\n      const data = await apiLogin(email, password);\r\n      // data sẽ chứa user info và token từ BE\r\n      setUser(data);\r\n      setIsAuthenticated(true);\r\n      Cookies.set('user', JSON.stringify(data), { expires: 1 }); // Lưu user và token\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    setIsAuthenticated(false);\r\n    Cookies.remove('user');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, isAuthenticated, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AALA;;;;;AAcA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,6BAA6B;QAC7B,MAAM,aAAa,qJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;QAC/B,IAAI,YAAY;YACd,IAAI;gBACF,MAAM,aAAa,KAAK,KAAK,CAAC;gBAC9B,QAAQ;gBACR,mBAAmB;YACrB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,qJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;YACjB;QACF;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,IAAI;YACF,MAAM,OAAO,MAAM,CAAA,GAAA,wIAAA,CAAA,QAAQ,AAAD,EAAE,OAAO;YACnC,wCAAwC;YACxC,QAAQ;YACR,mBAAmB;YACnB,qJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,SAAS,CAAC,OAAO;gBAAE,SAAS;YAAE,IAAI,oBAAoB;QACjF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,MAAM;QACR;IACF;IAEA,MAAM,SAAS;QACb,QAAQ;QACR,mBAAmB;QACnB,qJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;IACjB;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAiB;YAAO;QAAO;kBACjE;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}}]
}