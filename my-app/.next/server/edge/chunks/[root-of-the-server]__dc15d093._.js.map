{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nexport function middleware(request: NextRequest) {\r\n  const isAuthenticated = request.cookies.has('user'); \r\n  const isAuthPage = request.nextUrl.pathname === '/login';\r\n  const isDashboardRoute = request.nextUrl.pathname.startsWith('/dashboard-doctor');\r\n  const isPharmacyRoute = request.nextUrl.pathname.startsWith('/pharmacyPage');\r\n  const isReceptionistRoute = request.nextUrl.pathname.startsWith('/receptionistPage');\r\n\r\n  // Nếu đã đăng nhập và cố truy cập trang login, chuyển hướng về trang phù hợp\r\n  if (isAuthenticated && isAuthPage) {\r\n    // Lấy thông tin user từ cookie để xác định vai trò\r\n    const userCookie = request.cookies.get('user');\r\n    const user = userCookie ? JSON.parse(userCookie.value) : null;\r\n    \r\n    // Chuyển hướng dựa trên vai trò\r\n    if (user && user.role === 'PHARMACIST') {\r\n      return NextResponse.redirect(new URL('/pharmacyPage', request.url));\r\n    } else if (user && user.role === 'RECEPTIONIST') {\r\n      return NextResponse.redirect(new URL('/receptionistPage', request.url));\r\n    } else {\r\n      return NextResponse.redirect(new URL('/dashboard-doctor', request.url));\r\n    }\r\n  }\r\n\r\n  // Nếu chưa đăng nhập và cố truy cập các trang được bảo vệ\r\n  if (!isAuthenticated && (isDashboardRoute || isPharmacyRoute || isReceptionistRoute)) {\r\n    return NextResponse.redirect(new URL('/login', request.url));\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\n// Cập nhật matcher để bao gồm cả route receptionistPage\r\nexport const config = {\r\n  matcher: ['/login', '/dashboard-doctor/:path*', '/pharmacyPage/:path*', '/receptionistPage/:path*'],\r\n};"],"names":[],"mappings":";;;;AAAA;AAAA;;AAGO,SAAS,WAAW,OAAoB;IAC7C,MAAM,kBAAkB,QAAQ,OAAO,CAAC,GAAG,CAAC;IAC5C,MAAM,aAAa,QAAQ,OAAO,CAAC,QAAQ,KAAK;IAChD,MAAM,mBAAmB,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAC7D,MAAM,kBAAkB,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAC5D,MAAM,sBAAsB,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAEhE,6EAA6E;IAC7E,IAAI,mBAAmB,YAAY;QACjC,mDAAmD;QACnD,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QACvC,MAAM,OAAO,aAAa,KAAK,KAAK,CAAC,WAAW,KAAK,IAAI;QAEzD,gCAAgC;QAChC,IAAI,QAAQ,KAAK,IAAI,KAAK,cAAc;YACtC,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,iBAAiB,QAAQ,GAAG;QACnE,OAAO,IAAI,QAAQ,KAAK,IAAI,KAAK,gBAAgB;YAC/C,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,qBAAqB,QAAQ,GAAG;QACvE,OAAO;YACL,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,qBAAqB,QAAQ,GAAG;QACvE;IACF;IAEA,0DAA0D;IAC1D,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,mBAAmB,mBAAmB,GAAG;QACpF,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;IAC5D;IAEA,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;AAC1B;AAGO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAU;QAA4B;QAAwB;KAA2B;AACrG"}}]
}